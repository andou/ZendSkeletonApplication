(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.TabController=function(){function e(e){this.ref=e,this.onResize=t(this.onResize,this),this.tabChanged=t(this.tabChanged,this),this.openDirection=t(this.openDirection,this),this.setFilterInteraction=t(this.setFilterInteraction,this),this.setInteractions=t(this.setInteractions,this),this.showRef=t(this.showRef,this),this.showDirections=t(this.showDirections,this),this.ref.hide(),this.header=this.ref.parent().find("#header"),this.header_height=this.header.height(),this.padding=40,this.direction_top_height=239,this.current_tab="stores",this.tab_bar=this.ref.find(".toolbar-tabber"),this.stores_tab=this.tab_bar.find(".js-stores_tab"),this.direction_tab=this.tab_bar.find(".js-direction_tab"),this.general_content=this.ref.find(".toolbar-content"),this.stores_content=this.general_content.find(".stores-content"),this.search=this.stores_content.find(".search-wrapper"),this.direction_content=this.general_content.find(".direction-content"),this.direction_panel=this.direction_content.find("#direction-panel-scroller"),this.filter_btn=this.stores_content.find(".action-bar >a.filter"),this.stores_content_c=this.stores_content.find("#content"),this.stores_content_searchResult=this.stores_content.find("#content #wrapSearchResult"),this.stores_content_filterList=this.stores_content.find("#content #wrapFilterList"),this.stores_content_auxFilterList=this.stores_content.find("#content #auxFilterList"),this.footer_height=this.filter_btn.height(),this.tab_height=this.stores_tab.height(),this.search_height=parseInt(this.search.css("height")),this.direction_display_btn_height=this.direction_content.find(".action-bar >button").outerHeight(),event_emitter.addListener("CURRENT_TAB_IS_CHANGED",this.tabChanged),event_emitter.addListener("STORE_LIST_READY",this.showRef),event_emitter.addListener("OPEN_DIRECTION",this.openDirection),event_emitter.addListener("DIRECTION_CHANGE_CALLBACK",this.showDirections),this.direction_panel.hide(),this.setInteractions(),this.setFilterInteraction()}return e.prototype.showDirections=function(){return this.direction_panel.show(),this.ref.addClass("direction-opened")},e.prototype.showRef=function(){return this.ref.show(),"undefined"!=typeof store_list_iscroll&&null!==store_list_iscroll?store_list_iscroll.refresh():void 0},e.prototype.setInteractions=function(){var t=this;return this.stores_tab.click(function(e){var i;return e.preventDefault(),"stores"!==t.current_tab?(i=$(e.currentTarget),i.toggleClass("current"),t.direction_tab.toggleClass("current"),t.stores_content.show(),t.direction_content.hide(),t.current_tab="stores",event_emitter.emitEvent("CURRENT_TAB_IS_CHANGED")):void 0}),this.direction_tab.click(function(e){var i;return e.preventDefault(),"directions"!==t.current_tab?(i=$(e.currentTarget),i.toggleClass("current"),t.stores_tab.toggleClass("current"),t.direction_content.show(),t.stores_content.hide(),t.current_tab="directions",event_emitter.emitEvent("CURRENT_TAB_IS_CHANGED")):void 0})},e.prototype.setFilterInteraction=function(){var t=this;return this.filter_btn.click(function(e){var i;if(i=$(e.currentTarget),"stores"===t.current_tab)if(i.toggleClass("active"),i.hasClass("active")){if(t.stores_content_searchResult.show(),t.stores_content_filterList.hide(),"undefined"!=typeof store_list_iscroll&&null!==store_list_iscroll)return store_list_iscroll.refresh()}else if(t.stores_content_searchResult.hide(),t.stores_content_filterList.show(),"undefined"!=typeof filter_list_iscroll&&null!==filter_list_iscroll)return filter_list_iscroll.refresh()})},e.prototype.openDirection=function(){return this.direction_tab.click(),event_emitter.emitEvent("SETTING_FOCUS")},e.prototype.tabChanged=function(){return"stores"!==this.current_tab?(this.direction_panel.hide(),this.stores_content_filterList.hide(),this.stores_content_searchResult.show(),this.filter_btn.addClass("active"),this.ref.removeClass("direction-opened"),event_emitter.emitEvent("SETTING_MAP_OPTIONS")):(this.direction_panel.hide(),this.ref.removeClass("direction-opened"),event_emitter.emitEvent("CLEAR_DIRECTION"),"undefined"!=typeof store_list_iscroll&&null!==store_list_iscroll?store_list_iscroll.refresh():void 0)},e.prototype.onResize=function(t,e){var i,s,n;return s=e-this.header_height-this.footer_height-this.padding-this.search_height-this.tab_height,i=e-this.header_height-this.direction_top_height-this.direction_display_btn_height-this.padding-this.tab_height,s<window.item_min_height&&(s=window.item_min_height),i<window.item_min_height&&(i=window.item_min_height-200),n=92*this.stores_content_filterList.find(".filterList").children("li").length,s>n&&(s=n),this.stores_content_c.css("height",""+s+"px"),this.stores_content_searchResult.css("height",""+s+"px"),this.stores_content_filterList.css("height",""+s+"px"),this.stores_content_auxFilterList.css("height",""+s+"px"),this.direction_panel.css("height",""+i+"px")},e}()}).call(this);