(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.Slider=function(){function e(e){this.ref=e,this.onResize=t(this.onResize,this),this.onImageLoaded=t(this.onImageLoaded,this),this.loadNewImages=t(this.loadNewImages,this),this.checkIfImageIsOk=t(this.checkIfImageIsOk,this),this.onThumbClick=t(this.onThumbClick,this),this.resizeProgressBar=t(this.resizeProgressBar,this),this.getProgressBarStep=t(this.getProgressBarStep,this),this.initSlides=t(this.initSlides,this),this.initThumbsControl=t(this.initThumbsControl,this),this.initComplexSlider=t(this.initComplexSlider,this),this.checkActive=t(this.checkActive,this),this.initSimpleSlider=t(this.initSimpleSlider,this),this.w=$(window),this.slider=this.ref.find(".slider"),this.slide=this.slider.find(".slide"),this.action_bar_ref=this.ref.find(".wrap-controller"),this.wrapInfo=this.ref.find(".wrapInfo"),event_emitter.addListener("THUMB_CLICK",this.onThumbClick),this.view="landscape",this.currentId=1,this.action_bar_ref.length>0&&(this.type="complex",this.initComplexSlider()),this.wrapInfo.length>0&&(this.type="simple",this.initSimpleSlider()),this.initSlides(),event_emitter.emitEvent("THUMB_CLICK",["01"]),this.onResize()}return e.prototype.initSimpleSlider=function(){var t,e,i,s,r,h=this;for(this.paginator=this.wrapInfo.find(".sliderPaginator li >a"),r=[],e=i=0,s=this.paginator.length;s>=0?s>i:i>s;e=s>=0?++i:--i)t=$(this.paginator[e]),t.click(function(t){var e,i;return t.preventDefault(),e=$(t.currentTarget),h.checkActive(e),i=e.parent().attr("data-id"),event_emitter.emitEvent("THUMB_CLICK",[i])}),r.push(this.checkActive($(this.paginator[0])));return r},e.prototype.checkActive=function(t){var e,i,s,r;for(i=s=0,r=this.paginator.length;r>=0?r>s:s>r;i=r>=0?++s:--s)e=$(this.paginator[i]),e!==t&&e.hasClass("active")&&e.removeClass("active");return t.addClass("active")},e.prototype.initComplexSlider=function(){return this.progress_bar_ref=this.action_bar_ref.find(".progress-bar"),this.thumbs_ref=this.ref.find(".wrap-thumbs"),this.thumblist=this.thumbs_ref.find(".thumb-list"),this.thumblist.css("left",0),this.data_array=this.thumbs_ref.find(".thumb-list .thumb"),this.progress_bar_current_ref=this.progress_bar_ref.find(".current"),this.slidermenu=new SliderMouseFollower(this.thumbs_ref),this.thumbsHide=this.ref.find(".thumbsHide"),this.thumbsShow=this.ref.find(".thumbsShow"),this.initThumbsControl(),this.setProgressBar()},e.prototype.initThumbsControl=function(){var t=this;return this.thumbsShow.hide(),this.thumbsShow.click(function(e){var i;return i=$(e.currentTarget),e.preventDefault(),i.hide(),t.thumbsHide.show(),TweenLite.to(t.action_bar_ref,.5,{css:{top:0},ease:Power3.easeOut})}),this.thumbsHide.click(function(e){var i;return i=$(e.currentTarget),e.preventDefault(),i.hide(),t.thumbsShow.show(),TweenLite.to(t.action_bar_ref,.3,{css:{top:85},ease:Power4.easeIn})})},e.prototype.initSlides=function(){var t,e,i,s,r,h,a;for(a=[],t=r=0,h=this.slide.length;h>=0?h>r:r>h;t=h>=0?++r:--r)i=$(this.slide[t]),e=i.find("img"),s=e.attr("src"),i.attr("data-landscape",s),a.push(TweenLite.to(i,.1,{css:{opacity:0},ease:Power4.easeInOut}));return a},e.prototype.setProgressBar=function(){return this.updateProgressBar(0),this.resizeProgressBar},e.prototype.updateProgressBar=function(t){var e;return this.progress_bar_current_ref.attr("data-index",t),e=t*this.getProgressBarStep(),TweenLite.to(this.progress_bar_current_ref,1,{css:{width:""+e+"px"},ease:Power4.easeInOut})},e.prototype.getProgressBarStep=function(){var t;return t=this.thumbs_ref.width()/this.data_array.length},e.prototype.resizeProgressBar=function(){var t;return t=this.progress_bar_current_ref.attr("data-index")*this.getProgressBarStep(),this.progress_bar_current_ref.css({width:""+t+"px"})},e.prototype.onThumbClick=function(t){var e,i,s,r,h,a,n,o,p;for("complex"===this.type&&this.updateProgressBar(t),i=a=0,p=this.slide.length;p>=0?p>a:a>p;i=p>=0?++a:--a)r=$(this.slide[i]),o=parseInt(r.attr("data-id")),n=parseInt(t),h=parseInt(this.currentId),o===n&&(s=r),o===h&&(e=r);return TweenLite.to(e,.8,{css:{opacity:0},ease:Power4.easeInOut}),TweenLite.to(s,1,{css:{opacity:1},ease:Power4.easeInOut}),this.currentId=t},e.prototype.checkIfImageIsOk=function(){if("portrait"===this.view){if(this.area_w>this.area_h)return this.view="landscape",this.loadNewImages()}else if(this.area_w<this.area_h)return this.view="portrait",this.loadNewImages()},e.prototype.loadNewImages=function(){var t,e,i,s,r,h,a,n;for(n=[],e=h=0,a=this.slide.length;a>=0?a>h:h>a;e=a>=0?++h:--h)t=$(this.slide[e]),i=t.find("img"),r="portrait"===this.view?t.attr("data-portrait"):t.attr("data-landscape"),i.attr("src",r),s=new Image,s.ref=i,s.onload=this.onImageLoaded,n.push(s.src=r);return n},e.prototype.onImageLoaded=function(){return this.onResize()},e.prototype.onResize=function(){var t,e,i,s,r,h,a,n,o,p,d;for("complex"===this.type&&this.resizeProgressBar(),this.area_w=this.slider.width(),this.area_h=this.slider.height(),this.checkIfImageIsOk(),d=[],i=o=0,p=this.slide.length;p>=0?p>o:o>p;i=p>=0?++o:--o)t=$(this.slide[i]),s=t.find("img"),h=parseFloat(s.width()/s.height()),isNaN(h)?d.push(void 0):(e=this.area_w/h,e>this.area_h?(n=this.area_w,a=.5*(this.area_h-e),r=0):(n=this.area_h*h,e=this.area_h,a=0,r=.5*(this.area_w-n)),d.push(t.css({width:""+n+"px",height:""+e+"px",top:""+a+"px",left:""+r+"px"})));return d},e}()}).call(this);