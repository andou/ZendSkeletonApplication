// Generated by CoffeeScript 1.6.3
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.InfoSlider = (function() {
    function InfoSlider(ref) {
      this.ref = ref;
      this.onResize = __bind(this.onResize, this);
      this.slideChange = __bind(this.slideChange, this);
      this.sliderInteraction = __bind(this.sliderInteraction, this);
      this.sliderSetUp = __bind(this.sliderSetUp, this);
      this.sliderMenuSet = __bind(this.sliderMenuSet, this);
      this.slide = $('li.slide img');
      this.slideParent = $('li.slide');
      this.sliderWrap = $('.innerSlider');
      this.sliderMenuWrap = $('.sliderMenu');
      this.sliderMenu = $('.sliderMenuNav');
      this.sliderMenuItem = $('.sliderMenuNav li');
      this.infoWrap_ct = $('#mainContentWrapper');
      this.infoWrap_sl = $('.mainSlider');
      this.header = $('#header');
      this.slideCount = this.slide.length;
      this.slideMenuCount = this.sliderMenuItem.length;
      this.totalWidth = 0;
      this.totalWidth_m = 0;
      this.activeSlide = 0;
      this.containerWidth = this.ref.width();
      this.sliderMenuSet(this.ref.width(), this.sliderMenuItem.length);
      this.sliderSetUp();
      this.sliderInteraction();
    }

    InfoSlider.prototype.sliderMenuSet = function(width, items) {
      if (items > 4) {
        return this.itemWidth = width / 4;
      } else if (this.itemsWidth === width / items - 1) {
        return this.sliderMenuItem.children("img").css("width", "" + this.itemWidth + "px");
      }
    };

    InfoSlider.prototype.sliderSetUp = function() {
      var calWidth, i, _i, _j, _ref, _ref1;
      for (i = _i = 0, _ref = this.slideMenuCount; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        calWidth = this.sliderMenuItem.eq(i).width();
        this.totalWidth_m += calWidth;
      }
      this.sliderMenu.css("width", "" + this.totalWidth_m + "px");
      for (i = _j = 0, _ref1 = this.slideCount; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
        calWidth = this.slide.eq(i).width();
        this.slideParent.eq(i).width(calWidth);
        this.totalWidth += calWidth;
        if (i === 0) {
          this.slideParent.eq(i).css({
            'position': 'absolute',
            'opacity': '1',
            'top': '0px',
            'z-index': i
          });
        } else {
          this.slideParent.eq(i).css({
            'position': 'absolute',
            'opacity': '0',
            'top': '0px',
            'z-index': i
          });
        }
      }
      this.sliderWrap.css({
        'width': this.totalWidth,
        'position': 'relative'
      });
      return this.sliderMenuWrap.css({
        'z-index': '9'
      });
    };

    InfoSlider.prototype.sliderInteraction = function() {
      var _this = this;
      this.sliderMenuItem.click(function(e) {
        var currentClick, currentClickIndex;
        e.preventDefault();
        currentClick = $(e.currentTarget);
        currentClickIndex = currentClick.index();
        _this.slideChange(currentClickIndex);
        return currentClick.addClass('active');
      });
      this.sliderMenu.mousemove(function(e) {
        var parentOffset, relX, relY;
        parentOffset = _this.sliderMenu.parent().offset();
        relX = e.pageX - parentOffset.left;
        relY = e.pageY - parentOffset.top;
        if (relX < 200) {
          TweenLite.killTweensOf(_this.sliderMenu);
          TweenLite.to(_this.sliderMenu, 3, {
            css: {
              'margin-left': 0
            },
            easing: SlowMo.ease
          });
        }
        if (relX > _this.containerWidth - 200) {
          TweenLite.killTweensOf(_this.sliderMenu);
          return TweenLite.to(_this.sliderMenu, 3, {
            css: {
              'margin-left': _this.containerWidth - _this.totalWidth_m + 110
            },
            easing: SlowMo.ease
          });
        }
      });
      return this.sliderMenu.mouseleave(function() {
        return TweenLite.killTweensOf(_this.sliderMenu);
      });
    };

    InfoSlider.prototype.slideChange = function(showID) {
      var currentSlide, currentThumb, targetSlide, targetThumb;
      if (showID !== this.activeSlide) {
        currentSlide = this.slide.eq(this.activeSlide).parent('li');
        targetSlide = this.slide.eq(showID).parent('li');
        currentThumb = this.sliderMenuItem.eq(this.activeSlide);
        targetThumb = this.sliderMenuItem.eq(showID);
        TweenLite.to(currentSlide, 0.5, {
          css: {
            'opacity': '0'
          },
          easing: Sine.EaseIn
        });
        TweenLite.to(targetSlide, 1, {
          css: {
            'opacity': '1'
          },
          easing: Sine.EaseIn
        });
        currentThumb.removeClass('active');
        targetThumb.addClass('active');
        return this.activeSlide = showID;
      }
    };

    InfoSlider.prototype.onResize = function(window_w, window_h) {
      this.header_h = this.header.height();
      if (window_w > 720) {
        if (this.infoWrap != null) {
          this.infoWrap.css("height", "" + (window_h - this.header_h) + "px");
        }
        if (this.infoWrap_ct != null) {
          this.infoWrap_ct.css("height", "" + (window_h - this.header_h) + "px");
        }
        if (this.infoWrap_sl != null) {
          return this.infoWrap_sl.css("height", "" + (window_h - this.header_h - 100) + "px");
        }
      } else {
        return this.infoOutWrap = $('.storeInfoOuterWrap');
      }
    };

    return InfoSlider;

  })();

}).call(this);
